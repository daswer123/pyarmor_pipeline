# –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å–±–æ—Ä–∫–∏ PyArmor

## –ë—ã—Å—Ç—Ä–∞—è —Å—Å—ã–ª–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞, –≤–Ω—É—Ç—Ä–∏ –µ—Å—Ç—å –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
```
curl -sSL https://github.com/daswer123/pyarmor_pipeline/raw/main/00_boostrap.sh | sudo bash
```

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏ Python-–ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **PyArmor** –Ω–∞ **–æ–¥–Ω–æ–π –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π Linux-–º–∞—à–∏–Ω–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, VPS –∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ). –û–Ω –∏–º–∏—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ—Å—Ç–æ–π CI/CD –ø–∞–π–ø–ª–∞–π–Ω, –Ω–æ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –≤—Ä–æ–¥–µ Jenkins, GitLab CI –∏–ª–∏ GitHub Actions.

**–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:**

1.  –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (`source`).
2.  –û–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–∑–∞—â–∏—â–µ–Ω–Ω—ã–π PyArmor) –∫–æ–¥ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (`obfuscated`).
3.  –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç –ø—Ä–æ—Ü–µ—Å—Å:
    * –£—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ü–û (Python, Git, PyArmor).
    * –ù–∞—Å—Ç—Ä–æ–π–∫–∏ SSH-–¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±–æ–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º —Å –ø–æ–º–æ—â—å—é Deploy Keys.
    * –ü–æ–ª—É—á–µ–Ω–∏—è —Å–≤–µ–∂–µ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (`git pull`).
    * –ó–∞–ø—É—Å–∫–∞ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ `pyarmor gen`.
    * –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.
    * –û—Ç–ø—Ä–∞–≤–∫–∏ (`git push`) –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ –µ–≥–æ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

**–î–ª—è –∫–æ–≥–æ —ç—Ç–æ?**

* –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ PyArmor, –Ω–æ –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–ª–∏ –∂–µ–ª–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π CI/CD –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞—à–∏–Ω–∞—Ö.
* –î–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –∫–æ–≥–¥–∞ –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∞—à–∏–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ª–∏—Ü–µ–Ω–∑–∏—è PyArmor).
* –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤—Ä–æ–¥–µ **n8n**, **Node-RED**, –∏–ª–∏ —Å–∞–º–æ–ø–∏—Å–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ **–≤–µ–±-—Ö—É–∫–∏** –∏–ª–∏ **SSH-–∫–æ–º–∞–Ω–¥—ã** –Ω–∞ —ç—Ç–æ–π –º–∞—à–∏–Ω–µ.

**–ß–µ–º –ø–æ–º–æ–≥–∞–µ—Ç:**

* **–≠–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ä—É—Ç–∏–Ω–Ω—ã–µ —à–∞–≥–∏ —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.
* **–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –°–±–æ—Ä–∫–∞ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º—É.
* **–£–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å:** –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ.

## –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Å–ª–æ–≤–∏—è

* Linux-–º–∞—à–∏–Ω–∞ (—Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ Debian/Ubuntu, –Ω–æ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö —Å `apt`).
* –ü—Ä–∞–≤–∞ `root` –∏–ª–∏ `sudo` –Ω–∞ —ç—Ç–æ–π –º–∞—à–∏–Ω–µ.
* –î–æ—Å—Ç—É–ø –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ –∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤).
* –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ GitHub (–∏–ª–∏ –¥—Ä—É–≥–æ–º Git-—Ö–æ—Å—Ç–∏–Ω–≥–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–º SSH –∏ Deploy Keys).
* –î–≤–∞ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: –æ–¥–∏–Ω –¥–ª—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞, –¥—Ä—É–≥–æ–π ‚Äì –¥–ª—è –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
* **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)** –§–∞–π–ª –ª–∏—Ü–µ–Ω–∑–∏–∏ PyArmor (`regfile.zip` –∏–ª–∏ `pyarmor-regfile-xxxx.zip`), –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Pro-–≤–µ—Ä—Å–∏—é.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–±–∏—Ç –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç–∞–º–∏.

**–®–∞–≥ 0: –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**

* –°–∫–∞—á–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏. –û–Ω —Å–æ–∑–¥–∞—Å—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/root/scripts/`, —Å–∫–∞—á–∞–µ—Ç —Ç—É–¥–∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã, —Å–¥–µ–ª–∞–µ—Ç –∏—Ö –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏ –∏ —Å–æ–∑–¥–∞—Å—Ç –æ–±—Ä–∞–∑–µ—Ü —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `/root/.env`.
    ```bash
    # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å curl (apt install curl)
    curl -sSL https://github.com/daswer123/pyarmor_pipeline/raw/main/00_boostrap.sh | sudo bash
    ```
    *(–ó–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π, –µ—Å–ª–∏ –æ–Ω –∏–∑–º–µ–Ω–∏–ª—Å—è)*

**–®–∞–≥ 1: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`/root/.env`)**

* **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ** —Ñ–∞–π–ª `/root/.env`:
    ```bash
    sudo nano /root/.env
    ```
* **–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ** –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∑–∞–º–µ–Ω–∏–≤ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `<...>` –≤–∞—à–∏–º–∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–∏–º—è/email –¥–ª—è Git, —Ö–æ—Å—Ç Git-—Å–µ—Ä–≤–µ—Ä–∞, –∏–º–µ–Ω–∞ –≤–∞—à–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏ —Ç.–¥.). **–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —à–∞–≥!**

**–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

* –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python, Git, PyArmor –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Git:
    ```bash
    sudo bash /root/scripts/01_install_deps.sh
    ```

**–®–∞–≥ 2.5 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏ PyArmor Pro**

* **–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PyArmor Pro** –∏ —Ö–æ—Ç–∏—Ç–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –Ω–∞ —ç—Ç–æ–π –º–∞—à–∏–Ω–µ, –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –ª–∏—Ü–µ–Ω–∑–∏–∏ (`regfile.zip` –∏–ª–∏ `pyarmor-regfile-xxxx.zip`), –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ.
* –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à —Ñ–∞–π–ª –ª–∏—Ü–µ–Ω–∑–∏–∏ –Ω–∞ –º–∞—à–∏–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `/root/`).
* –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ **–ø–æ—Å–ª–µ** —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PyArmor (–®–∞–≥ 2) –∏ **–¥–æ** –ø–µ—Ä–≤–æ–π —Å–±–æ—Ä–∫–∏ (–®–∞–≥ 5). –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:
    ```bash
    # –ó–∞–º–µ–Ω–∏—Ç–µ /path/to/your/regfile.zip –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –≤–∞—à–µ–º—É —Ñ–∞–π–ª—É –ª–∏—Ü–µ–Ω–∑–∏–∏
    pyarmor reg /path/to/your/regfile.zip
    ```

**–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PyArmor**

* –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PyArmor (–µ—Å–ª–∏ –æ–Ω–∏ –≤–∞–º –Ω—É–∂–Ω—ã):
    ```bash
    sudo bash /root/scripts/02_configure_pyarmor.sh
    ```
    *(–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã `pyarmor cfg ...` –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã)*

**–®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∏ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤**

* –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH –∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
    ```bash
    sudo bash /root/scripts/03_setup_ssh_and_clone.sh
    ```
* **–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞:**
    1.  –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SSH-–∫–ª—é—á–∏ –≤ `/root/ssh/source/` –∏ `/root/ssh/obf/`.
    2.  –í—ã–≤–µ–¥–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏ –∏ **–ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** –ø–æ –∏—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –≤ Deploy Keys –Ω–∞ –≤–∞—à–µ–º Git-—Ö–æ—Å—Ç–∏–Ω–≥–µ (—É–∫–∞–∑–∞–Ω–Ω–æ–º –≤ `GIT_SSH_HOST` –≤ `.env`).
    3.  **!!! –û–°–¢–ê–ù–û–í–ò–¢–°–Ø !!!** –∏ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –≤—ã **–≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–∏—Ç–µ –∫–ª—é—á–∏** –Ω–∞ Git-—Ö–æ—Å—Ç–∏–Ω–≥, **–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–≤ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å (Allow write access)** –¥–ª—è –∫–ª—é—á–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ–¥–æ–º (`OBF_REPO_NAME`).
    4.  –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –¥–æ–±–∞–≤–∏—Ç–µ –∫–ª—é—á–∏, **–Ω–∞–∂–º–∏—Ç–µ Enter** –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω —Å–∫—Ä–∏–ø—Ç.
    5.  –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É: –Ω–∞—Å—Ç—Ä–æ–∏—Ç —Ñ–∞–π–ª `~/.ssh/config` –∏ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å (–∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ `git pull`) –≤–∞—à–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (`WORK_DIR` –∏–∑ `.env`).

**–®–∞–≥ 5: –ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏**

* –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –±—É–¥–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–≥–æ —Ü–∏–∫–ª–∞ —Å–±–æ—Ä–∫–∏:
    ```bash
    sudo bash /root/scripts/04_build_and_push.sh
    ```
* **–ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:**
    1.  –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (`$WORK_DIR/–∏–º—è_source_—Ä–µ–ø–æ`).
    2.  –í—ã–ø–æ–ª–Ω—è–µ—Ç `git pull` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.
    3.  –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ `pyarmor gen ...` (–∫–æ–º–∞–Ω–¥–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ `PYARMOR_BUILD_CMD` –≤ `.env`). –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø–∞–ø–∫—É `dist/`.
    4.  –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ (`$WORK_DIR/–∏–º—è_obf_—Ä–µ–ø–æ`).
    5.  **–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–∫—Ä–æ–º–µ –ø–∞–ø–∫–∏ `.git`).
    6.  –ö–æ–ø–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ `dist/` –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ —Å—é–¥–∞.
    7.  –í—ã–ø–æ–ª–Ω—è–µ—Ç `git add .`, `git commit -m "..."` (—Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ `.env`), `git push`.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`/root/.env`)

–§–∞–π–ª `/root/.env` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–π–ø–ª–∞–π–Ω–∞:

* `PYTHON_VERSION`: –í–µ—Ä—Å–∏—è Python –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "3.10").
* `PYARMOR_VERSION`: –í–µ—Ä—Å–∏—è PyArmor –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "9.1.3").
* `GIT_USER_NAME`: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∫–æ–º–º–∏—Ç–æ–≤ –≤ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
* `GIT_USER_EMAIL`: Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∫–æ–º–º–∏—Ç–æ–≤.
* `GIT_SSH_HOST`: –•–æ—Å—Ç Git-—Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `github.com`).
* `GIT_SSH_USER`: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Git-—Ö–æ—Å—Ç—É (–æ–±—ã—á–Ω–æ `git`).
* `SOURCE_REPO_NAME`: –ò–º—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ `–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π`.
* `OBF_REPO_NAME`: –ò–º—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π`.
* `WORK_DIR`: –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –º–∞—à–∏–Ω–µ, –∫—É–¥–∞ –±—É–¥—É—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
* `PYARMOR_BUILD_CMD`: –ü–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ PyArmor.
* `COMMIT_MESSAGE`: –®–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∫–æ–º–º–∏—Ç–æ–≤ –≤ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

## –û–±–∑–æ—Ä —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

```mermaid
graph TD
    SourceGitHub["GitHub: Source Repo"] -->|Push —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞| Trigger["üõ† –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞: 05_build_and_push.sh"]
    Trigger --> PullSource["üì• –®–∞–≥ 2: git pull –≤ $WORK_DIR/source_repo"]
    PullSource --> Build["üîê –®–∞–≥ 3: –û–±—Ñ—É—Å–∫–∞—Ü–∏—è ‚Äî pyarmor gen ..."]
    Build --> Copy["üìÇ –®–∞–≥ 4: –û—á–∏—Å—Ç–∫–∞ $WORK_DIR/obf_repo –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ dist/"]
    Copy --> PushObf["üì§ –®–∞–≥ 5: git add/commit/push –≤ $WORK_DIR/obf_repo"]
    PushObf --> ObfGitHub["GitHub: Obfuscated Repo"]
```

## –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –í–µ–±-—Ö—É–∫–∏ / n8n / –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ (—à–∞–≥–∏ 0-4 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã), –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —Å–±–æ—Ä–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É –Ω–∞ –≤–∞—à–µ–π Linux-–º–∞—à–∏–Ω–µ:

```bash
sudo bash /root/scripts/04_build_and_push.sh
```

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∞—à—É —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, n8n, Node-RED, Jenkins, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –≤–µ–±-—Ö—É–∫–∞) —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∞ –ø–æ–¥–∫–ª—é—á–∞–ª–∞—Å—å –∫ –≤–∞—à–µ–π Linux-–º–∞—à–∏–Ω–µ –ø–æ SSH –∏ –≤—ã–ø–æ–ª–Ω—è–ª–∞ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–±-—Ö—É–∫–∞ –æ—Ç GitHub –ø—Ä–∏ –ø—É—à–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞).

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

* **–û—à–∏–±–∫–∏ SSH:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Deploy Keys –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞ GitHub —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –¥–ª—è obf-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å `github.com` (–∏–ª–∏ –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∞) –ø–æ –ø–æ—Ä—Ç—É 22. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `ssh -vT git@github.com-source` (–∏–ª–∏ `-obf`) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
* **–û—à–∏–±–∫–∏ Git:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `git config --global user.name/email`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö –Ω–µ—Ç –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
* **–û—à–∏–±–∫–∏ PyArmor:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã `PYARMOR_BUILD_CMD` –≤ `.env`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª–∏—Ü–µ–Ω–∑–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) –∞–∫—Ç–∏–≤–Ω–∞ (`sudo python -m pyarmor L`). –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ PyArmor.
* **–û—à–∏–±–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:** –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã —á–µ—Ä–µ–∑ `sudo bash ...`, –µ—Å–ª–∏ –æ–Ω–∏ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–∞–≤ root. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/root/scripts`, `/root/workdir`, `/root/.env`, `/root/ssh`.
